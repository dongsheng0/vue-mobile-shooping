{"remainingRequest":"C:\\project_xcx\\vue-mobile-shooping\\node_modules\\babel-loader\\lib\\index.js!C:\\project_xcx\\vue-mobile-shooping\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\project_xcx\\vue-mobile-shooping\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\project_xcx\\vue-mobile-shooping\\src\\pages\\product\\hotel\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\project_xcx\\vue-mobile-shooping\\src\\pages\\product\\hotel\\detail.vue","mtime":1567498989800},{"path":"C:\\project_xcx\\vue-mobile-shooping\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\project_xcx\\vue-mobile-shooping\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\project_xcx\\vue-mobile-shooping\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\project_xcx\\vue-mobile-shooping\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport headImg from \"../../../components/detail/head\";\nimport roomDate from \"../../../components/detail/roomDate\";\nimport serverHttp from \"../../../assets/js/api\";\nexport default {\n  data: function data() {\n    return {\n      detailId: this.$route.params.id,\n      productList: [],\n      list: [],\n      details: {},\n      error: false,\n      loading: true\n    };\n  },\n  components: {\n    headImg: headImg,\n    roomDate: roomDate\n  },\n  mounted: function mounted() {\n    this.getDetail();\n  },\n  methods: {\n    onLoad: function onLoad() {\n      console.log(0);\n      this.loading = false;\n    },\n    handelSelect: function handelSelect(e) {\n      console.log('选中后的结果');\n      console.log(e);\n    },\n    getDetail: function getDetail() {\n      var _this = this;\n\n      serverHttp.hotelDetailApi({\n        id: this.detailId\n      }).then(function (res) {\n        console.log(res.rs);\n        var result = res.rs;\n        _this.details = result || {};\n        _this.pic = result.pics[0];\n        _this.productList = result.rooms;\n\n        _this.productList.forEach(function (item) {\n          item.picUrl = item.pic_url; // 有限时特价\n\n          if (item.specialOfferTimeLimit) {\n            item.minimumPrice = item.price;\n            item.price = item.specialOfferPrice;\n          }\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA,OAAA,OAAA;AACA,OAAA,QAAA;AACA,OAAA,UAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EADA;AAEA,MAAA,WAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA,EAHA;AAIA,MAAA,OAAA,EAAA,EAJA;AAKA,MAAA,KAAA,EAAA,KALA;AAMA,MAAA,OAAA,EAAA;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA,OADA;AAEA,IAAA,QAAA,EAAA;AAFA,GAXA;AAeA,EAAA,OAfA,qBAeA;AACA,SAAA,SAAA;AACA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AACA,WAAA,OAAA,GAAA,KAAA;AACA,KAJA;AAKA,IAAA,YALA,wBAKA,CALA,EAKA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AACA,KARA;AASA,IAAA,SATA,uBASA;AAAA;;AACA,MAAA,UAAA,CAAA,cAAA,CAAA;AAAA,QAAA,EAAA,EAAA,KAAA;AAAA,OAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,EAAA;AACA,YAAA,MAAA,GAAA,GAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,MAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,GAAA,GAAA,MAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,MAAA,CAAA,KAAA;;AACA,QAAA,KAAA,CAAA,WAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,IAAA,CAAA,MAAA,GAAA,IAAA,CAAA,OAAA,CADA,CAEA;;AACA,cAAA,IAAA,CAAA,qBAAA,EAAA;AACA,YAAA,IAAA,CAAA,YAAA,GAAA,IAAA,CAAA,KAAA;AACA,YAAA,IAAA,CAAA,KAAA,GAAA,IAAA,CAAA,iBAAA;AACA;AACA,SAPA;AAQA,OAdA;AAeA;AAzBA;AAlBA,CAAA","sourcesContent":["\r\n\r\n<template>\r\n  <!-- 酒店详情 -->\r\n  <div class=\"detail\">\r\n    <!-- <head-img :detail=\"details\"></head-img> -->\r\n    <room-date @select=\"handelSelect\" />\r\n    <div class=\"detail-list\">\r\n      <van-list v-model=\"loading\" :error.sync=\"error\" error-text=\"请求失败，点击重新加载\" @load=\"onLoad\">\r\n        <van-cell v-for=\"item in productList\" :key=\"item.id\">\r\n          <product-card :product=\"item\" source=\"hotelDetail\" @clickThumb=\"$router.push({path: `/room/${item.id}`})\">\r\n            <template slot=\"tags\">\r\n              <div>\r\n                <span class=\"card-tag\" v-for=\"(tag,i) in item.attributes\" :key=\"i\">{{tag}}</span>\r\n              </div>\r\n            </template>\r\n            <span slot=\"bottom\" class=\"hotel-time-end\">\r\n              限时：\r\n              <van-count-down :time=\"item.specialOfferTimeLimit | countDown\" />\r\n            </span>\r\n            <template slot=\"footer\">\r\n              <van-row type=\"flex\" justify=\"space-between\">\r\n                <van-col span=\"12\" class=\"bottom-content\">\r\n                  <!-- <span class=\"point\">使用前3日可退</span> -->\r\n                  <span class=\"point active\">奖励{{item.rakeOff | price}}</span>\r\n                </van-col>\r\n                <van-col span=\"12\">\r\n                  <span class=\"share\">推广</span>\r\n                  <router-link class=\"preorder\" :to=\"`/hotel/order/${item.id}`\">预定</router-link>\r\n                </van-col>\r\n              </van-row>\r\n              <div class=\"useRules\">\r\n                <p class=\"point\" v-for=\"(item, i) in item.useRules\" :key=\"i\">{{item}}</p>\r\n              </div>\r\n            </template>\r\n          </product-card>\r\n        </van-cell>\r\n      </van-list>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport headImg from \"../../../components/detail/head\";\r\nimport roomDate from \"../../../components/detail/roomDate\";\r\nimport serverHttp from '../../../assets/js/api'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      detailId: this.$route.params.id,\r\n      productList: [],\r\n      list: [],\r\n      details: {},\r\n      error: false,\r\n      loading: true\r\n    }\r\n  },\r\n  components: {\r\n    headImg,\r\n    roomDate\r\n  },\r\n  mounted () {\r\n    this.getDetail()\r\n  },\r\n  methods: {\r\n    onLoad () {\r\n      console.log(0)\r\n      this.loading = false\r\n    },\r\n    handelSelect (e) {\r\n      console.log('选中后的结果')\r\n      console.log(e)\r\n    },\r\n    getDetail () {\r\n      serverHttp.hotelDetailApi({ id: this.detailId }).then(res => {\r\n        console.log(res.rs);\r\n        let result = res.rs\r\n        this.details = result || {}\r\n        this.pic = result.pics[0]\r\n        this.productList = result.rooms\r\n        this.productList.forEach(item => {\r\n          item.picUrl = item.pic_url\r\n          // 有限时特价\r\n          if (item.specialOfferTimeLimit) {\r\n            item.minimumPrice = item.price\r\n            item.price = item.specialOfferPrice\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import \"../../../assets/style/global\";\r\n.detail {\r\n  &-list {\r\n    .hotel-time-end {\r\n      float: right;\r\n      color: @primary;\r\n    }\r\n    .bottom-content {\r\n      text-align: left !important;\r\n      line-height: 30px;\r\n    }\r\n  }\r\n  .useRules {\r\n    text-align: left;\r\n  }\r\n}\r\n</style>\r\n\r\n"],"sourceRoot":"src/pages/product/hotel"}]}